:root {
    --bg: #0b1220;
    --card: #111827;
    --surface: #0f172a;
    --text: #e5e7eb;
    --muted: #9ca3af;
    --accent: #38bdf8;
    --accent2: #818cf8;
    --border: rgba(255,255,255,0.08);
}

/* App background */
.stApp {
    background: linear-gradient(180deg, #0b1220, #020617);
    color: var(--text);
}

/* Header */
.header {
    text-align: center;
    padding: 26px;
    border-bottom: 1px solid var(--border);
}
.header h1 {
    font-size: 2.3rem;
    font-weight: 700;
}
.header span {
    color: var(--accent);
}

.glass {
    background: rgba(17, 24, 39, 0.85);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    border-radius: 18px;
    padding: 26px;
    margin-bottom: 28px;
    border: 1px solid rgba(255,255,255,0.25);
    color: #ffffff;
}

.glass-title h1 {
    margin-bottom: 5px;
}

/* Cards */
.card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 18px;
    padding: 22px;
}

/* Mode pill */
.mode-pill {
    padding: 8px 18px;
    border-radius: 999px;
    font-size: 0.8rem;
    font-weight: 600;
    margin-top: 10px;
    display: inline-block;
}
.strict {
    background: rgba(239,68,68,0.15);
    color: #fca5a5;
}
.open {
    background: rgba(34,197,94,0.15);
    color: #86efac;
}

/* Chat bubbles */
.stChatMessage {
    background: var(--surface) !important;
    border: 1px solid var(--border);
    border-radius: 16px;
}

/* Chat input (top + bottom consistency FIX) */
textarea, input, .stChatInput textarea {
    background: var(--surface) !important;
    color: var(--text) !important;
    border-radius: 14px !important;
    border: 1px solid var(--border) !important;
}

/* Buttons */
.stButton button {
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: #020617;
    border-radius: 14px;
    font-weight: 700;
}

/* Sidebar */
section[data-testid="stSidebar"] {
    background: #0b1220;
    border-right: 1px solid var(--border);
}


/* ================= INPUT BOX WHITE STRIP FIX ================= */

.stChatInputContainer {
    background: #020617 !important;
    border-top: 1px solid rgba(255,255,255,0.12);
}


/* FORCE CHAT TEXT VISIBILITY */
.stChatMessage p,
.stChatMessage span,
.stChatMessage li,
.stChatMessage div {
    color: #e5e7eb !important;
    font-weight: 500;
}

/* Assistant vs User subtle distinction */
[data-testid="stChatMessage"][aria-label="assistant"] {
    background: #0f172a !important;
    border: 1px solid rgba(255,255,255,0.12);
}

[data-testid="stChatMessage"][aria-label="user"] {
    background: #020617 !important;
    border: 1px solid rgba(255,255,255,0.18);
}

/* ========== FIX 1: Chat Input Box ========== */
textarea, 
input, 
.stTextInput input,
.stTextArea textarea,
div[data-testid="stChatInput"] textarea,
div[data-testid="stChatInput"] input {
    background: rgba(15, 23, 42, 0.95) !important;
    color: #e5e7eb !important;
    border-radius: 14px !important;
    border: 1px solid rgba(255,255,255,0.15) !important;
    padding: 12px !important;
}

/* Placeholder text in input */
textarea::placeholder,
input::placeholder {
    color: #6b7280 !important;
    opacity: 1 !important;
}

/* Focus state for input */
textarea:focus, 
input:focus,
div[data-testid="stChatInput"] textarea:focus {
    border-color: #38bdf8 !important;
    box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.2) !important;
    outline: none !important;
}

/* ========== FIX 2: Toggle/Checkbox (Open Knowledge) ========== */
div[data-testid="stCheckbox"] {
    background: rgba(15, 23, 42, 0.6) !important;
    padding: 12px !important;
    border-radius: 10px !important;
    border: 1px solid rgba(255,255,255,0.1) !important;
}

div[data-testid="stCheckbox"] label {
    color: #ffffff !important;
    font-weight: 500 !important;
}

div[data-testid="stCheckbox"] label span {
    color: #ffffff !important;
}

/* ========== FIX 3: Sidebar Caption ========== */
section[data-testid="stSidebar"] * {
    color: #e5e7eb !important;
}

.stCaption {
    color: #6b7280 !important;
}

section[data-testid="stSidebar"] .stCaption {
    color: #6b7280 !important;
    text-align: center;
}